base_task:
    vars:
      - var2: '$(readlink -e {arg2})'
      - var5: '-r'
    input: bash {ymldir}/select_files.sh "{var2}" {var4} {var6}
    transform: perl {ymldir}/relative_path.pl "{var2}"
    opts:
        - multi
        - no-sort
        - reverse
        - header="$(echo {var2} | python {ymldir}/norm_path.py -a -t -d)"
    query: '$(echo "{arg3} " | grep -v "^\s*$")'
    preview: echo {} | bash {ymldir}/preview.sh
    output:
      enter:
        - pipe: perl {ymldir}/relative_path.pl "$(pwd)"
                  | python {ymldir}/norm_path.py {var5}
                  | tr '\n' ' '
switch_task:
    ctrl-d:
      vars:
        - var4: '{var4|-d|}'
    ctrl-h:
      vars:
        - var6: '{var6|-h|}'
    alt-u:
      vars:
        - var2: $(readlink -e {var2}/..)
    alt-enter:
      vars:
        - var2: $(readlink -e {pre_content})
    alt-j:
      vars:
        - var2: "{pre_query}"
        - var5: '-a'

