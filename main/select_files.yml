base_task:
    vars:
      - var2: '$(readlink -e {arg2})'
    input: bash {ymldir}/select_files.sh "{var2}" {var4}
    transform: perl {ymldir}/relative_path.pl "{var2}"
    opts:
        - multi
        - no-sort
        - reverse
        - header="$(readlink -e {var2} | grep -vx '/')/"
    query: '{arg3} '
    preview: echo {} | bash {ymldir}/preview.sh
    output:
      enter:
        - pipe: perl {ymldir}/relative_path.pl "$(pwd)" | tr '\n' ' '
switch_task:
    ctrl-d:
      vars:
        - var4: '{var4|-d|}'
    alt-u:
      vars:
        - var2: $(readlink -e {var2}/..)
    alt-enter:
      vars:
        - var2: $(readlink -e {pre_content})
