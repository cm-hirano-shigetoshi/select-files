base_task:
    variables:
        origin_path: '{{arg1}}'
    source: pt -g ^ {{origin_path}} 2>/dev/null
    source_transform: sed 's%^{{origin_path}}/%%' | python {{tool_dir}}/main/path.py -p relative
    options:
        - multi
        - reverse
        - header='$(echo {{origin_path}} | python {{tool_dir}}/main/path.py -p absolute -t -s)'
        - query={{arg2}}
        - preview='bash {{tool_dir}}/main/preview_file.sh {}'
    post_operations:
        enter:
            - pipe: python {{tool_dir}}/main/path.py
            - join
task_switch:
    alt-f:
        source: pt -g ^ {{origin_path}} 2>/dev/null
    alt-a:
        source: find {{origin_path}} 2>/dev/null
    alt-h:
        source: find {{origin_path}} -type f 2>/dev/null
    alt-d:
        source: find {{origin_path}} -type d 2>/dev/null
    alt-l:
        source: ls -1 {{origin_path}} 2>/dev/null
        source_transform: ls -l --color=always {{origin_path}} 2>/dev/null | sed 1d
        post_operations:
            enter:
                - pipe: sed 's%^%{{origin_path}}/%' | python {{tool_dir}}/main/path.py
                - join
    alt-u:
        variables:
            origin_path: '{{origin_path}}/..'

